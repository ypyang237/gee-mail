<html>
  <head>
  <title>Pamela Yang</title>
  <link href="static/css/bootstrap.min.css" rel="stylesheet">
  <link href="static/css/custom.css" rel="stylesheet">
  <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
  <script src="js/mail-generator.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.11.4/jquery-ui.min.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.4/jquery.min.js"></script>
  <script src="js/mail-generator.js"></script>
  <link href="css/style.css" rel="stylesheet" media="screen">
    

  <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs
    jquery/1.12.0/jquery.min.js"></script>
    <script src="http://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>

    <script>
      window.onload = function(){
        // ALL OF YOUR JAVASCRIPT CODE SHOULD GO HERE. 
        // We have to use window.onload so your JavaScript doesn't execute until the page has loaded and all HTML has been downloaded to your browser



        var previousMails = window.geemails.length;

        for (i = 0; i < previousMails; i++) {
            prependMessage(window.geemails[i]);
        };

        // adding in the new emails :sorted by date, sender, subject and body
        //var main = function() {
    //$(".row").append(function() {
    //  var now = new Date();
    //  return generateMessage(now);
    //});
    

    function prependMessage () {
                
            var newMessage = getNewMessage();

                $('.start').prepend(

                '<tr>' +
            + '<td></td>'
            + '<td class="msgDate">' + newMessage.date + '</td>'  
            + '<td class="msgSubject">' +  newMessage.subject + '</td>' 
            + '<td class="msgSender">' + newMessage.sender + '</td>' +    
          '</tr>' +

          '<tr>' + 
        
          '<td colspan="3" class="emailbdy funky">' + '<a class="clickMe" href="#">'+ newMessage.body + '</a>' + '</td>' +

          '</tr>'
        

          );

                window.geemails.push(newMessage);

                //$('.emailbdy').hide();

            $('.emailbdy').click(function() {

              $(this).toggleClass('funky');

            });   


            $('#emailNum').text(window.geemails.length - previousMails);





    };


      function clickToggle() {
             $('.emailbdy').click(function() {

              $(this).toggleClass('funky');

            }); 
         };

       clickToggle();

       
  




  setInterval(prependMessage,3000);

        
       }; 
      
    </script>


    

  </head>

  <body>


    

    <div class="container" id="main">
        

  <div class="container">
      <div class="jumbotron">
        <h1>Geemail Challenge!</h1>
          <p>Click each one to view/close the content!</p> 
          <p>Total Emails</p> 
          <p id="emailNum"></p>
      </div>

<table class="email-heading" id="t01" style="width:100%">
  <tr>
    <th width="40%">Date</th>
    <th width="35%">Subject</th>    
    <th width="25%">Sender</th>
  </tr>

</table>    

  <table class="start" style="width:100%">
  </table>



                
                




  </body>

